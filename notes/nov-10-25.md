# November 10th, 2025

Author(s): Aly Ashour

## Projects Page

Let's keep track of work on this through GitHub Projects here:
https://github.com/users/alyashour/projects/13.

## Updated Pipeline

Faking the data, grid with mlr in the cells

Turns out data with specific trips requested by users is very hard to find. From my
search I found NONE for London and think it's very unlikely for there to be any that
are publicly available - probably due to privacy concerns.

Furthermore, we still don't have a specific system for the ridership predictor or the
route designer. I propose solutions for the first 2 issues below.

### Simulating Data

Problem: we don't have origin-destination (O-R) data for users at different times,
days, seasons, conditions, etc. We need this data in order to create a machine learning
model that can estimate relatively accurate-to-life figures for ridership on any given day.

We are lucky however in that we don't really need perfect data to create this model. AND
we have the added benefit that we're creating this system for a university course which
means that we don't really care how good it is at working on London in real life - the
exercise is wholy and only the model(s).

So we'll create a script. This script takes in population density and demographic
features as well as information about where people *go* in London (like Western, Fanshawe
Downtown, Masonville, etc.) and goes through a series of steps to convert that into a 
csv file of usable ridership data.

We can then create the RIPR model based on this route data and move on.

For usability's sake, the csv containing the ridership data can be swapped out by
the city or anyone with the necessary data to create a more accurate-to-life RIPR model.

Crucially, the complexity of RIPR is larger than the complexity of the data generator.
The rules we implement in the generator should be good enough but in the case of real
life data, RIPR should be able to capture more complex relationships.

How does this data look? Something like so:

- Trip data
| Origin ID | Destination ID | Date (dd/mm/yyyy) | Time (hh:mm:ss AM/PM) |
| --------- | -------------- | ----------------- | --------------------- |
| 1         | 3              | 10/11/2025        | 08:09:22 AM           |

- Weather data. For simplicity we'll have 1 forecast per day.
| Date (dd/mm/yyyy) | Weather Condition (rain, clear, snow, cloudy) |
| ----------------- | --------------------------------------------- |

> Notice that the generator does *not* come up with the stops or city demographic data
> those are *inputs* into the generator.

### RIPR Model

We need a way of producing similar-to-life routes/trips based on initial conditions for
a city. RIPR is only trained once for the city and then during inference only takes in
the conditions needed to predict the day's ridership.

RIPR could take in..

Two approaches:
- MLR in cells in a grid of values that produce the probability that any one trip goes
from stop $x$ to stop $y$.
- To handle complex relationships between cells (the probability of one cell may 
influence the probability of another) we could create a neural network with nx(n-1)
output neurons.

In both cases above this probability matrix can then be multiplied by the output of
some other model/algorithm that predicts the number of riders that commute using public
transport during that specific day under those conditions. I personally don't know if 
this problem is better suited for some kind of equation with parameters or a linear
regression model but seeing as they're fundamentally the same thing and this is a machine
learning course we'll implement this using linear regression.

We'll call the two approaches the MLR-RIPR and NN-RIPR versions. We'll call the ridership
count predictor RCP.

### Overall

Now we have this:

- Data generation
City information (demographic, routing, etc.) -> Ridership Generator -> Fake ridership data (csv)

- Model training
Ridership data (csv) -> Train(RIPR) -> Trained RIPR
Ridership data (csv) -> Train(RCP)  -> Trained RCP

- Model inference (usage)
Daily parameters -> RIPR -> trip probability matrix (TPM)
Daily parameters -> RCP  -> total daily rider count (TDRC)

- Output
Ridership Vector (daily) = TDRC * TPM


